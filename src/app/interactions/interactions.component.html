<div class="container ui-lg-12 ui-md-10 ui-sm-8 ui-xs-6 ui-g-12">
  <div class="row">
    <div class="ui-lg-12 ui-md-10 ui-sm-8 ui-xs-6 ui-g-12">
      <div class="panel panel-primary" *ngIf="joinned; else joinroom">
        <div class="panel-heading">
          <h1> </h1>
          <h1> </h1>
          <h1> </h1>
          <span class="fa fa-comments-o"></span> {{ msgData.room }}
          <div class="btn-group pull-right">
            <button pButton icon="fa fa-sign-out" type="button" (click)="logout()" class="btnLeave" id="btnLeave"></button>
          </div>
        </div>
        <div #scrollMe class="panel-body" style="min-height: 70vh; max-height: 70vh; overflow: auto;">
          <ul class="chat list-unstyled">
            <li *ngFor="let c of chats">
              <div class="left clearfix" *ngIf="c.nickname===msgData.nickname; else rightchat">
                <span class="chat-img pull-left">
                  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSpsfP61YoFd2Cu5HrC0QFOlzWEN9pA_mcEZ5z0B0ejw2XOxcFz"
                    width="70px" height="70px" alt="User Avatar" class="img-raised img-border" />
                </span>
                <div class="chat-body clearfix">
                  <div class="header">
                    <pre class="apple-font ui-g-8 text-center" style="white-space:pre-wrap; overflow: visible; min-height: 80px;">
<h4><strong>{{ c.nickname }} <i class="fa fa-commenting-o"></i></strong></h4>
<p style="margin: -20px 0 -50px 0"> {{ c.message }}

  <i class="pull-right fa fa-clock-o text-muted"> {{ c.date | date: 'medium' }}</i></p>
</pre>
                  </div>
                </div>
              </div>
              <ng-template #rightchat>
                <div class="right clearfix">
                  <span class="chat-img pull-right">
<img src="http://iconsetc.com/icons-watermarks/flat-rounded-square-white-on-orange/raphael/raphael_user/raphael_user_flat-rounded-square-white-on-orange_512x512.png"
                      width="70px" height="70px" alt="User Avatar" class="img-raised" style="opacity: 0.6" />
                  </span>
                  <div class="chat-body clearfix">
                    <div class="header">
                      <pre class="apple-font ui-g-8 text-center pull-right" style="white-space:pre-wrap; overflow: visible; min-height: 80px;">
<h4><strong>{{ c.nickname }} <i class="fa fa-commenting-o"></i></strong></h4>
<p style="margin: -20px 0 -50px 0"> {{ c.message }}

  <i class="pull-left fa fa-clock-o text-muted"> {{ c.date | date: 'medium' }}</i></p>
</pre>
                    </div>

                  </div>
                </div>
              </ng-template>
            </li>
          </ul>
        </div>

        <form (ngSubmit)="sendMessage()" #msgForm="ngForm">
          <div class="input-group">

            <input type="hidden" [(ngModel)]="msgData.room" name="room" />
            <input type="hidden" [(ngModel)]="msgData.nickname" name="nickname" />
            <input id="btn-input" type="text" [(ngModel)]="msgData.message" name="message" class="form-control input-sm"
              placeholder="Type your message here..." required="" />
            <span class="input-group-btn">
              <button class="btn btn-warning btn-sm" id="btn-chat" [disabled]="!msgForm.form.valid">
                <span class="material-icons" style="padding: 0 10px;">send</span></button>
            </span>
          </div>
        </form>
      </div>


      <ng-template #joinroom>
        <div class="panel panel-primary">
          <div class="panel-body">
            <h1>Select Chat Room</h1>
            <form (ngSubmit)="joinRoom()" #joinForm="ngForm">
              <div class="form-group">
                <input type="text" class="form-control" [(ngModel)]="newUser.nickname" name="nickname" placeholder="Nickname"
                  required="" />
              </div>
              <div class="form-group">
                <select class="form-control" [(ngModel)]="newUser.room" name="room" required="">
                  <option>Select Room</option>
                  <option value="Storage Wars">Storage Wars</option>
                  <option value="Big Rig Battle">Big Rig Battle</option>
                  <option value="Battleship">Battleship</option>
                  <option value="Fight or Flight">Fight or Flight</option>
                  <option value="Train Surfing">Train Surfing</option>
                </select>
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-success" [disabled]="!joinForm.form.valid">Join</button>
              </div>
            </form>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>
